# 第 3 章 : 基本的なツール

多くの新人は IDE に安住しがちだが、基本的なツールをすぐにでも使えるように自ら研鑽を積んでおかなければ IDE の限界を超えたところに到達できない。

## 16 プレインテキストの威力

- 達人プログラマーが扱うもの - 知識
- 知識の格納に適したものがプレインテキスト(印字可能な文字からなる人間が直接読んで理解できる形式)

**Tip 25** --- 知識はプレインテキストに保存すること

### テキストの力

- 時代の流れによる陳腐化に対する保険 -- 理解に知識が少ない
- 既存ツールでの活用性 -- 既存ツールは事実上プレインテキストで操作できる
- テストの容易さ -- テストをプレインテキストで合成する

### チャレンジ

## 17 貝殻(シェル)遊び

- 全てのツールはシェルから実行可能(アプリ・デバッガ・ブラウザ等)
- パイプによるツール同士の接続
- GUI にはない見た目以外のものを得ることが可能

**Tip 26**:コマンドシェルの力を使うこと

### 自分専用のシェル

- カラーテーマの設定
- プロンプトの設定
- エイリアスとシェル関数
- コマンドの保管

## 18 パワーエディット

**Tip 27**:エディターに熟達すること

真のメリット : エディターに熟達することで、編集の方法について意識しなくても済むようになること

### "熟達"という言葉の意味

マウスやトラックパッドを使わずにこういったことすべてをできるでしょうか？

- テキストを編集する際、文字や単語、行、段落で移動や選択が行える。
- コードを編集する際、さまざまな構文単位（対応する区切り文字や、関数、モジュール）で移動ができる。
- 変更作業以降にコードのインデントを付け直せる。
- 単一コマンドで、コードブロックにコメントを付けたり外したりできる。
- 変更のアンドゥとリドゥができる。
- エディターのウィンドウを複数のパネルに分割し、それらの間で移動できる。
- 特定の行番号に移動する。
- 選択した範囲の行を並び替える。
- 文字列と正規表現の双方で検索し、以前の検索を繰り返す。
- 選択範囲やマッチしたパターンに基づいてカーソルを複数生成し、それぞれをまとめて編集する。
- 現在のプロジェクトで発生しているコンパイルエラーを表示させる。
- 現在のプロジェクトにおけるテストを実行する。

### 熟達に向けて進む

日々の繰り返し作業で"もっと良い方法があるはずだ"と考える癖をつけ、それを見つけ、繰り返し身につくまで実践しましょう。

1. やりたいことを実現する拡張機能を探す
2. 使っているエディターの拡張言語を調べ、やらせたい繰り返し作業を自動化するための利用法を見つけ出す
3. 完全な拡張機能を実装する

### チャレンジ

## 19 バージョン管理

バージョン管理の機能

- ソースコードの復元
- 変更の追跡
- 開発したソフトウェアリリースの識別
- アーカイブ
- 同一ファイル群の並行編集・同一ファイルの同時編集

**Tip 28**:常にバージョン管理システムを使用すること

### ブランチアウト

ブランチのメリット

- 隔離環境が与えられる
- プロジロジェクト作業におけるワークフローの中核にブランチが据えられる

### プロジェクトのハブとしてのバージョン管理

リポジトリーの管理自体は本業ではないため、サードパーティーのものを利用することを推奨する。

機能一覧

- 優れたセキュリティとアクセス制御
- 直感的なユーザーインターフェース
- コマンドラインからすべての機能に対するアクセス能力（自動化する上で必要となります）
- ビルドとテストの自動化能力
- ブランチのマージまわりの優れたサポート（プルリクエストなどを含む）
- イシューの管理（メトリクスを取得するという点からコミットやマージに統合されていることが望ましいのです）
- 優れたレポーティング能力（カンバンボードのようなペンディング中のイシューやタスクを表示する機能は特に有用となります）
- 優れたチームのコミュニケーション（電子メールや、その他の変更通知、Wiki など）

### チャレンジ

## 20 デバッグ

### デバッグの心理学

**Tip 29**:非難するのではなく、問題を修復すること

バグの原因があなたのミスにあるのか、他人のミスにあるのかは関係ありません。これはいずれにしても「あなた」の問題なのです。

### デバッグの心構え

**Tip 30**:パニクるな

本来のペースを取り戻すためには、何がバグだと認識できる症状を引き起こしたのか、という真の原因を「考える」ことが重要なのです。

デバッグ中は、近視眼的な物の見方にならないよう注意してください。ただ単純にその症状を修復したくなる欲望に負けてはいけません。ひょっとしたら真の原因はあなたが目にしているものとは別のレベルで、そしてその他の事項とも関連しているかもしれないのです。問題の外見のみに目を向けるのではなく、常に問題の原因の根を見つけるように努力してください。

### どこから手をつけるか

1. コンパイラーの警告レベルはできる限り最大にして、警告のないコードかどうかを確認する
2. 問題解決につながる適切なデータを緻密な観察をしてすべて集める
3. サードパーティーを経由してくるバグ報告は正確性が損なわれている場合もあるため、十分詳しい水準の情報を得るには、バグを報告してきた相手にも注意を払意を払う

実例に基づくポイント

- 最初に報告されてきた情報よりも多くの情報を集めるには、バグを報告してきたユーザーにインタビューするのが手っ取り早いこともあります。
- うわべだけのテスト（例えば上述のプログラマーが実施した、ブラシを下から上に描画するテストなど）は、アプリケーションにとって十分なものではありません。境界条件やエンドユーザーが使用する現実的なパターンを使った厳格なテストが必要となるのです。さらに、そういったテストは体系的に行う必要があります（「容赦ない継続的テスト（ 352 ページ）」を参照）。

### デバッグ時の戦略

- バグの再現
  **Tip 31**:コード修正の前にテストを失敗させること
- 異国の地に放り込まれたプログラマー
  **Tip 32**:エラーメッセージをちゃんと読む
- おかしな結果
  - 何よりもまず、デバッガー上で誤った値が実際に発生していることを確認する
  - 思いつきでたどった際の形跡を残す
  - 一般的なバグのシナリオを 2 つ見てみる
- 入力値から探る
  - クラッシュした場所から遡っていく
  - データから手をつける
- リリース間での回帰テスト

### 二分探索法

1. 中央で 2 分割し、中央が目的にあったものかを判断し、あっていれば終了する
2. 目的とあっていない場合は 2 分割したものでどちらが目的にあったものかを判断する
3. 判断したものに対して 1 の作業を再び行う

この考え方は、デバッグ時にも有効である。

#### ログ、そして／あるいはトレース

#### ゴムのアヒルちゃん

問題の原因を探し出すための非常に簡単で効果的なテクニックとして、「誰かに説明する」という手法がある。他人に問題を説明するには、ま
ずコードを精読し、その中に存在する暗黙の仮定を明確にしていかなければなりません。こういったいくつかの仮定を言葉で表すことで、問題に対する新たな見識が突如としてひらめくわけです。

#### 除去プロセス

バグは開発中のアプリケーションに存在し、ライブラリ自身に問題があると疑うよりも、アプリケーション側のコードがライブラリを正しく呼び出していないと考えたほうが一般的に正しい。

**Tip 33**:"select"は壊れていない

#### 驚きの要素

**Tip 34**:仮定仮定を置かずに、証明すること

驚くようなバグに遭遇した場合

- それをただ修正するだけではなく、なぜこういったミスが初期の段階で発覚しなかったのかという理由も考える
  - ユニットテストやその他のテスト方法を修正すれば発見できるようになるのかについても、よく考えてください。
- 問題が、誤ったデータに端を発し、途中のパラメーターチェックを強化することで、早い段い段階での問題検出を実施するべきかも検証してください
- 今対処しているバグによって影響を受けそうなコードが、他の部分にないでしょうか？
- バグの修正に時間がかかるようであれば、なぜ時間がかかるのかを自問してください
- バグが誰かの誤った仮定に起因するものであった場合、その問題をチーム全体で議論してください。

### デバッグ時のチェックリスト

- 報告を受けた問題は、元となるバグの直接的な結果でしょうか、それとも単なる症状なのでしょうか？
- そのバグは本当に使用しているフレームワークに存在しているのでしょうか？ それとも OS に存在しているのでしょうか？ それともあなたのコードに潜んでいるのでしょうか？
- この問題を同僚に説明するとしたら、どのように説明すればよいでしょうか？
- 疑わしいコードがユニットテストをパスしていたのであれば、テストは十分だったのでしょうか？ 「この」データを使ってユニットテストを実行していたなら、どうなっていたのでしょうか？
- このバグを発生させた条件が、システム内のどこか他の部分に残っていないでしょうか？ 他のバグがどこかに眠っており、目覚めの時を待っていないでしょうか？

### チャレンジ

## 21 テキスト操作言語

正しく使えばこういったツールは驚くほど手際よく巧妙な成果物を生み出せます(従来の言語を使った際には 5~10 倍の時間がかかる)。しかし、マスターするのにはそれなりの時間がかかるのです。

**Tip 35**:テキスト操作言語(Python, Ruby, シェルスクリプトなど)を学ぶこと

### 演習問題

## 22 エンジニアリング日誌

エンジニアリング日誌とは、作業内容や学んだこと、アイデアの概略、各種の計測器から読み取った内容など、基本的に仕事に関係のあるあらゆることを記録する日誌です。最終ページまで使い切ったら、背表紙に期間を書いて、以前の日誌がしまわれている棚に保管します。

日誌には主な利点が 3 つあります。

- 記録は記憶よりも確実です。誰かから「先週、停電が起こった際、どの会社に電話をかけたんだっけ？」という質問をされた場合、日誌があればすぐに名前と連絡先電話番号を答えることができます。
- 手持ちの作業とは直接関係しないアイデアを思いついた場合、それをしっかりと残せるようになります。これで素晴らしいアイデアを忘れてしまうという心配をすることなく、手持ちの作業に集中できるようになります。
- 「ゴムのアヒルちゃん （ 120 ページ） 」とよく似た力を発揮します。何かを書き留めるためにやりかけの作業の手を止めると、あなたの脳は誰かに話しかける時と同様のギアシフトが起こります —— このタイミングが振り返りのチャンスとなります。そして、ノートへの書き込みを始めると、今までやってきたこと、すなわち書き込もうとしていた内容の間違いに気付くという場合もあります。

この他にも利点がある。このため、エンジニアリング日誌をファイルや Wiki ではなく、紙ベースのものを使ってつけるようにしてください。手描きにはタイピングとは違う特別な何かがあります。はタイピングとは違う特別な何かがあります。
